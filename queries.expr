{

"deleteOldData":"\"\r\n--Replace4SL|,30,|,\"+JSON.parse(_infSettings).InstallStructureConfig.LoggingSection.DataRetentionDays+\",\r\n\r\nDELETE stg\r\nFROM pi_abcd_if00export_staging stg\r\nINNER JOIN pi_sl_pipeline_log l ON stg.run_id=l.run_id\r\nWHERE DATEADD(day,\"+JSON.parse(_infSettings).InstallStructureConfig.LoggingSection.DataRetentionDays+\",l.start_utc)<GETUTCDATE()\r\n\"",

"query":"\"\r\n--Replace4SL|'Wbs190'|'\"+JSON.parse(_infSettings).InstallStructureConfig.InterfaceInputFields.AlternateStructures.MultiSelectDemo.AltStructure+\"'\r\n--Replace4SL|'2268'|'\"+JSON.parse(_infSettings).InstallStructureConfig.InterfaceInputFields.AlternateStructures.get('Project Manager').StructureCode+\"'\r\n--Replace4SL|'PE02'|'\"+JSON.parse(_infSettings).InstallStructureConfig.InterfaceInputFields.CustomFields.Business_Need.FieldID+\"'\r\n--Replace4SL|'WBS20$OPEN'|'\"+JSON.parse(_infSettings).InstallStructureConfig.InterfaceSection.ImportStatusCodes.toString().replaceAll(\",\",\"','\")+\"'\r\n\r\nSELECT pe.short_name AS [Work_ID],\r\n	s.description AS [Project_Name], \r\n	CONVERT(VARCHAR,pe.schedule_start,104) AS [Schedule_Start], \r\n	CONVERT(VARCHAR,pe.schedule_finish,104) AS [Schedule_Finish],\r\n	stat.description AS [Status],\r\n	reqp.description AS [Requester_Priority],\r\n	u.full_name AS [Lifecycle_Administrator], \r\n	CAST(cd.score3 AS VARCHAR) AS [Preliminary_Score],\r\n	(SELECT STRING_AGG(attr.description,'|') FROM multi_attribute ma \r\n		INNER JOIN structure attr ON ma.attribute_code=attr.structure_code\r\n		WHERE ma.alt_structure_name='\"+JSON.parse(_infSettings).InstallStructureConfig.InterfaceInputFields.AlternateStructures.MultiSelectDemo.AltStructure+\"' AND ma.prime_structure_code=pe.planning_code) AS [Multi_Select_Demo],\r\n	(SELECT u.full_name FROM workflow wf \r\n		INNER JOIN wf_team wft ON wf.workflow_id=wft.workflow_id \r\n		INNER JOIN ip_user u ON u.user_name=wft.user_name\r\n		WHERE wf.planning_code=pe.planning_code AND wft.lifecycle_role_code='\"+JSON.parse(_infSettings).InstallStructureConfig.InterfaceInputFields.AlternateStructures.get('Project Manager').StructureCode+\"') AS [Project_Manager],\r\n	(SELECT STRING_AGG(lt.line_text,'') FROM long_text lt \r\n		WHERE lt.key1='\"+JSON.parse(_infSettings).InstallStructureConfig.InterfaceInputFields.CustomFields.Business_Need.FieldID+\"' AND lt.key2=pe.planning_code) AS [Business_Need]\r\nFROM planning_entity pe \r\nINNER JOIN structure s ON pe.planning_code=s.structure_code\r\nLEFT JOIN custom_data cd ON pe.planning_code=cd.planning_code\r\nLEFT JOIN structure stat ON pe.code20=stat.structure_code\r\nLEFT JOIN ip_user u ON pe.lc_admin_user=u.user_name\r\nLEFT JOIN structure reqp ON pe.code25=reqp.structure_code\r\nWHERE pe.planning_code=pe.ppl_code AND pe.code20 IN ('\"+JSON.parse(_infSettings).InstallStructureConfig.InterfaceSection.ImportStatusCodes.toString().replaceAll(\",\",\"','\")+\"')\r\n\""

}
